-- ELIMINACION DE ASOCIACION DE USUARIOS CON CIRCUITOS ANTIGUOS
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 75;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 76;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 78;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 79;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 80;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 81;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 82;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 83;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 84;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 85;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 86;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 87;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 88;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 89;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 90;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 91;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 92;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 93;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 94;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 95;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 96;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 97;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 98;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 99;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 100;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 101;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 102;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 103;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 104;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 105;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 106;
-- empFacturacion
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 1000;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 1001;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 1002;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 1003;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 1004;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 1005;
DELETE FROM PF_CIRCUITO_POR_PERSONA WHERE ID_REGISTRO = 1006;

COMMIT;

-- ELIMINACION DE FIRMANTES A LOS MIEMBROS DE FACTURACIÓN (EXCEPTO JOAN)
DELETE FROM PF_FIRMANTE_POR_PERSONA WHERE DNI_SOLICITANTE = '42035091S';
DELETE FROM PF_FIRMANTE_POR_PERSONA WHERE DNI_SOLICITANTE = '43771798S';
DELETE FROM PF_FIRMANTE_POR_PERSONA WHERE DNI_SOLICITANTE = '42059165P';
DELETE FROM PF_FIRMANTE_POR_PERSONA WHERE DNI_SOLICITANTE = '42180204K';
DELETE FROM PF_FIRMANTE_POR_PERSONA WHERE DNI_SOLICITANTE = '42076346P';
DELETE FROM PF_FIRMANTE_POR_PERSONA WHERE DNI_SOLICITANTE = '78569420V';
DELETE FROM PF_FIRMANTE_POR_PERSONA WHERE DNI_SOLICITANTE = '45450334B';

COMMIT;

-- CIRCUITOS DE FACTURACION INDICADOS POR JOAN
INSERT INTO PF_FLUJOS (ID_FLUJO, FECHA_CREACION, ID_TIPO_FLUJO, ORDEN_ACTIVO, DESCRIPCION) VALUES (29, '01/12/15', 2, 1, 'Firma Jefe Facturación (INFORMES)');
INSERT INTO PF_GRUPOS (ID_GRUPO, FIRMANTES_REQUERIDOS, ORDEN, ID_FLUJO, ID_TIPO_GRUPO, CERRADO) VALUES (57, 1, 1, 29, 2, 0);
INSERT INTO PF_GRUPO_PERSONAS (ID_GRUPO_PERSONA, ID_GRUPO, ID_PERSONA, PERSONA_OBLIGATORIA, REALIZADO) VALUES (57, 57, 8, 0, 0); -- Joan Baéz
--
INSERT INTO PF_FLUJOS (ID_FLUJO, FECHA_CREACION, ID_TIPO_FLUJO, ORDEN_ACTIVO, DESCRIPCION) VALUES (30, '11/11/15', 2, 1, 'Validación Jefe Facturación - Firma Director (PROPUESTAS RESOLUCIÓN)');
INSERT INTO PF_GRUPOS (ID_GRUPO, FIRMANTES_REQUERIDOS, ORDEN, ID_FLUJO, ID_TIPO_GRUPO, CERRADO) VALUES (58, 1, 1, 30, 1, 0);
INSERT INTO PF_GRUPOS (ID_GRUPO, FIRMANTES_REQUERIDOS, ORDEN, ID_FLUJO, ID_TIPO_GRUPO, CERRADO) VALUES (59, 1, 2, 30, 2, 0);
INSERT INTO PF_GRUPO_PERSONAS (ID_GRUPO_PERSONA, ID_GRUPO, ID_PERSONA, PERSONA_OBLIGATORIA, REALIZADO) VALUES (58, 58, 8, 0, 0); -- Joan Baéz
INSERT INTO PF_GRUPO_PERSONAS (ID_GRUPO_PERSONA, ID_GRUPO, ID_PERSONA, PERSONA_OBLIGATORIA, REALIZADO) VALUES (59, 59, 10, 0, 0); -- José Rafael Díaz
--
INSERT INTO PF_FLUJOS (ID_FLUJO, FECHA_CREACION, ID_TIPO_FLUJO, ORDEN_ACTIVO, DESCRIPCION) VALUES (31, '11/11/15', 2, 1, 'Firma Jefe Facturación - Firma Jefe Explotación (INFORMES RECLAMACIONES)');
INSERT INTO PF_GRUPOS (ID_GRUPO, FIRMANTES_REQUERIDOS, ORDEN, ID_FLUJO, ID_TIPO_GRUPO, CERRADO) VALUES (60, 1, 1, 31, 2, 0);
INSERT INTO PF_GRUPOS (ID_GRUPO, FIRMANTES_REQUERIDOS, ORDEN, ID_FLUJO, ID_TIPO_GRUPO, CERRADO) VALUES (61, 1, 2, 31, 2, 0);
INSERT INTO PF_GRUPO_PERSONAS (ID_GRUPO_PERSONA, ID_GRUPO, ID_PERSONA, PERSONA_OBLIGATORIA, REALIZADO) VALUES (60, 60, 8, 0, 0); -- Joan Baéz
INSERT INTO PF_GRUPO_PERSONAS (ID_GRUPO_PERSONA, ID_GRUPO, ID_PERSONA, PERSONA_OBLIGATORIA, REALIZADO) VALUES (61, 61, 5, 0, 0); -- Leandro Melgar
--
INSERT INTO PF_FLUJOS (ID_FLUJO, FECHA_CREACION, ID_TIPO_FLUJO, ORDEN_ACTIVO, DESCRIPCION) VALUES (32, '01/12/15', 2, 1, 'Validación Jefe Facturación - Firma Jefe División Sostenibilidad (INFORMES CALIDAD - MEDIOAMBIENTE)');
INSERT INTO PF_GRUPOS (ID_GRUPO, FIRMANTES_REQUERIDOS, ORDEN, ID_FLUJO, ID_TIPO_GRUPO, CERRADO) VALUES (62, 1, 1, 32, 1, 0);
INSERT INTO PF_GRUPOS (ID_GRUPO, FIRMANTES_REQUERIDOS, ORDEN, ID_FLUJO, ID_TIPO_GRUPO, CERRADO) VALUES (63, 1, 2, 32, 2, 0);
INSERT INTO PF_GRUPO_PERSONAS (ID_GRUPO_PERSONA, ID_GRUPO, ID_PERSONA, PERSONA_OBLIGATORIA, REALIZADO) VALUES (62, 62, 8, 0, 0); -- Joan Baéz
INSERT INTO PF_GRUPO_PERSONAS (ID_GRUPO_PERSONA, ID_GRUPO, ID_PERSONA, PERSONA_OBLIGATORIA, REALIZADO) VALUES (63, 63, 9, 0, 0); -- Jaime Ruiz
--
INSERT INTO PF_FLUJOS (ID_FLUJO, FECHA_CREACION, ID_TIPO_FLUJO, ORDEN_ACTIVO, DESCRIPCION) VALUES (33, '01/12/15', 2, 1, 'Validación Jefe Facturación - Firma Director (PROPUESTAS RESOLUCIÓN)');
INSERT INTO PF_GRUPOS (ID_GRUPO, FIRMANTES_REQUERIDOS, ORDEN, ID_FLUJO, ID_TIPO_GRUPO, CERRADO) VALUES (64, 1, 1, 33, 1, 0);
INSERT INTO PF_GRUPOS (ID_GRUPO, FIRMANTES_REQUERIDOS, ORDEN, ID_FLUJO, ID_TIPO_GRUPO, CERRADO) VALUES (65, 1, 2, 33, 2, 0);
INSERT INTO PF_GRUPO_PERSONAS (ID_GRUPO_PERSONA, ID_GRUPO, ID_PERSONA, PERSONA_OBLIGATORIA, REALIZADO) VALUES (64, 64, 8, 0, 0); -- Joan Baéz
INSERT INTO PF_GRUPO_PERSONAS (ID_GRUPO_PERSONA, ID_GRUPO, ID_PERSONA, PERSONA_OBLIGATORIA, REALIZADO) VALUES (65, 65, 10, 0, 0); -- José Rafael Díaz
--

COMMIT;

-------------------------------------------------------------------------------------------------------------
-- CIRCUITOS PREDEFINIDOS POR USUARIO
-- Usuarios de prueba
-------------------------------------------------------------------------------------------------------------
-- empFacturacion
INSERT INTO PF_CIRCUITO_POR_PERSONA (ID_REGISTRO, ID_CIRCUITO, DNI_SOLICITANTE) VALUES (1000, 29, '33333333P');
INSERT INTO PF_CIRCUITO_POR_PERSONA (ID_REGISTRO, ID_CIRCUITO, DNI_SOLICITANTE) VALUES (1001, 30, '33333333P');
INSERT INTO PF_CIRCUITO_POR_PERSONA (ID_REGISTRO, ID_CIRCUITO, DNI_SOLICITANTE) VALUES (1002, 31, '33333333P');
INSERT INTO PF_CIRCUITO_POR_PERSONA (ID_REGISTRO, ID_CIRCUITO, DNI_SOLICITANTE) VALUES (1003, 32, '33333333P');
INSERT INTO PF_CIRCUITO_POR_PERSONA (ID_REGISTRO, ID_CIRCUITO, DNI_SOLICITANTE) VALUES (1004, 33, '33333333P');
--

COMMIT;

--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- CIRCUITOS PREDEFINIDOS POR PROCEDIMIENTO/TRAMITE/DEPARTAMENTO
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
-- TIPO 1: INFORME TÉCNICO FACTURACIÓN + PROPUESTA DE RESOLUCIÓN (EXFASEM, EXFASMM, EXFABBR)
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (1, 'EXFASEM', 'informes', null, 29);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (2, 'EXFASMM', 'informes', null, 29);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (3, 'EXFABBR', 'informes', null, 29);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (4, 'EXFASEM', 'resolucion', null, 29);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (5, 'EXFASMM', 'resolucion', null, 29);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (6, 'EXFABBR', 'resolucion', null, 29);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (7, 'EXFASEM', 'resolucion', null, 30);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (8, 'EXFASMM', 'resolucion', null, 30);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (9, 'EXFABBR', 'resolucion', null, 30);
--
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (19, 'EXFAOTR', 'instruccion', 'dptFacturacion', 29);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (20, 'EXFAOTR', 'resolucion', 'dptFacturacion', 29);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (21, 'EXFAOTR', 'resolucion', 'dptFacturacion', 30);
--
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (22, 'EXFABBI', 'instruccion', 'dptFacturacion', 29);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (23, 'EXFABBI', 'resolucion', 'dptFacturacion', 29);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (24, 'EXFABBI', 'resolucion', 'dptFacturacion', 30);
--
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (60, 'EXFACRI', 'instruccion', 'dptFacturacion', 29);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (61, 'EXFACRI', 'resolucion', 'dptFacturacion', 29);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (62, 'EXFACRI', 'resolucion', 'dptFacturacion', 30);
--
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (54, 'EXFAFES', 'instruccion', 'dptFacturacion', 29);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (55, 'EXFAFES', 'resolucion', 'dptFacturacion', 29);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (56, 'EXFAFES', 'resolucion', 'dptFacturacion', 30);
--
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (57, 'EXFATRA', 'instruccion', 'dptFacturacion', 29);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (58, 'EXFATRA', 'resolucion', 'dptFacturacion', 29);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (59, 'EXFATRA', 'resolucion', 'dptFacturacion', 30);

-- TIPO 2: INFORME TÉCNICO FACTURACIÓN FIRMA JEFE FACTURACIÓN Y JEFE DE AREA DE EXPLOTACIÓN (PLEFRTS, PLEFRTA, EXFAREC)
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (10, 'PLEFRTS', 'informes', 'dptFacturacion', 31);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (11, 'PLEFRTA', 'informes', null, 31);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (12, 'EXFAREC', 'instruccion', 'dptFacturacion', 31);
-- TIPO 3: INFORME TÉCNICO OTRO DEPARTAMENTO + PROPUESTA DE RESOLUCIÓN (EXFABBC, EXFABBM)
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (13, 'EXFABBC', 'informes', null, 32);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (14, 'EXFABBM', 'informes', null, 32);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (15, 'EXFABBC', 'resolucion', null, 32);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (16, 'EXFABBM', 'resolucion', null, 32);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (17, 'EXFABBC', 'resolucion', null, 33);
INSERT INTO CAT_PROCEDIMIENTOS_CIRCUITOS(ID, PROC_ID, ACTIVIDAD_ID, DEPARTAMENTO_ID, CIRCUITO_ID) VALUES (18, 'EXFABBM', 'resolucion', null, 33);


-- Actualización de circuitos para el procedimiento EXFAOTR tras haber cambiado al PAC simple
DELETE FROM CAT_PROCEDIMIENTOS_CIRCUITOS WHERE ID = 20;
UPDATE CAT_PROCEDIMIENTOS_CIRCUITOS SET ACTIVIDAD_ID = 'gestionDocumentos' WHERE ID = 19;
UPDATE CAT_PROCEDIMIENTOS_CIRCUITOS SET ACTIVIDAD_ID = 'gestionDocumentos' WHERE ID = 21;

COMMIT;


